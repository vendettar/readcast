# Readcast（React + TypeScript 重写版）开发介绍 / 交接文档

面向接手开发团队：介绍当前代码的功能边界、关键模块、算法与缓存策略、持久化与测试方式，以及常见排障入口。

> 分支：`feature/react-rewrite`（React 19 + TS + Vite SPA）  
> 原版（DOM/原生 JS）参考：`main` 分支与 `original/` 目录

---

## 0. 强制规则（维护约束）

这些规则用于降低维护成本，适用于 **所有后续迭代**：

1) **不需要兼容旧数据（按首次上线开发）**
   - 不做 IndexedDB / localStorage 的版本迁移与兼容层。
   - 当存储结构或缓存逻辑发生变化时，允许直接清库/重建。

2) **每次改动都必须同步更新本文档**
   - 任意功能改动/重构/修 bug 完成后，都要以“实际代码”为准更新 `docs/handoff_doc.md`。
   - 文档只记录“结果/现状”，不记录过程日志。

---

## 1. 项目做什么（产品/功能概述）

TODO（任务完成后补全：以实际代码为准）

- 产品概述：Readcast 的两大入口（Local Files / Gallery）
- 关键用户流程：播放 → 字幕 → 查词；订阅/收藏；本地文件入库与恢复

## 2. 本地开发 / 构建 / 测试

## 3. 运行时配置（CORS 代理）

## 4. 目录结构与模块边界（建议从这里读代码）

## 5. 持久化与缓存（存哪里、保多久）

### 5.1 IndexedDB（长期持久化）

### 5.2 localStorage（中期缓存 / 轻量配置）

### 5.3 内存缓存（短期、刷新即失效）

### 5.4 Session 持久化策略

## 6. 网络与中断规则（Abort / 竞态 / 去重）

### 6.1 直连→代理 fallback

### 6.2 inflight 去重 + 并发上限

### 6.3 中断（Abort）策略

## 7. Gallery 推荐算法（榜单池 → 分组 → 触底加载）

TODO（任务完成后补全：以实际代码为准）

## 8. Transcript / Selection（长列表与交互）

TODO（任务完成后补全：以实际代码为准）

## 9. Modal 输入锁（input lock）

TODO（任务完成后补全：以实际代码为准）

## 10. 测试与质量门槛

TODO（任务完成后补全：以实际代码为准）

## 11. 错误处理与用户提示（ErrorBoundary / Toast / 文案策略）

TODO（任务完成后补全：以实际代码为准）

## 12. 常见排障入口（Debug）

TODO（任务完成后补全：以实际代码为准）

## 13. 重要约束与已知边界

TODO（任务完成后补全：以实际代码为准）
